<Window x:Class="VopecsPOS.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="Vopecs POS"
        Height="800" Width="1280"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        StateChanged="Window_StateChanged"
        KeyDown="Window_KeyDown"
        LocationChanged="Window_LocationChanged"
        SizeChanged="Window_SizeChanged">

    <Grid>
        <!-- WebView2 -->
        <wv2:WebView2 x:Name="WebView"
                      Source="about:blank"/>

        <!-- Loading Overlay -->
        <Border x:Name="LoadingOverlay"
                Background="#80000000"
                Visibility="Visible"
                Panel.ZIndex="100">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True"
                             Width="200"
                             Height="4"
                             Background="#333333"
                             Foreground="#1976D2"
                             BorderThickness="0"/>
                <TextBlock Text="Loading..."
                           Foreground="White"
                           FontSize="14"
                           Margin="0,15,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- FAB Anchor for Popup positioning -->
        <Border x:Name="FabAnchor"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Width="1" Height="1"
                Margin="0,0,16,16"/>

        <!-- FAB Popup - renders on top of WebView2 -->
        <Popup x:Name="FabPopup"
               PlacementTarget="{Binding ElementName=FabAnchor}"
               Placement="Left"
               StaysOpen="True"
               AllowsTransparency="True"
               IsOpen="True">
            <StackPanel x:Name="FabPanel">
                <!-- Expanded Menu -->
                <StackPanel x:Name="FabMenu" Visibility="Collapsed">
                    <!-- Home Button with Icon -->
                    <Button x:Name="HomeButton"
                            Click="HomeButton_Click"
                            Cursor="Hand"
                            Margin="0,0,0,8">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="#F5F5F5" CornerRadius="24" Padding="12,8">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.15"/>
                                    </Border.Effect>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Home" FontSize="13" FontWeight="Medium"
                                                   Foreground="#333333" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <Border Background="#E3F2FD" CornerRadius="15" Width="30" Height="30">
                                            <TextBlock Text="ðŸ " FontSize="14"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <!-- Settings Button with Icon -->
                    <Button x:Name="SettingsButton"
                            Click="SettingsButton_Click"
                            Cursor="Hand"
                            Margin="0,0,0,12">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="#F5F5F5" CornerRadius="24" Padding="12,8">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.15"/>
                                    </Border.Effect>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Settings" FontSize="13" FontWeight="Medium"
                                                   Foreground="#333333" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <Border Background="#E3F2FD" CornerRadius="15" Width="30" Height="30">
                                            <TextBlock Text="âš™ï¸" FontSize="14"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>

                <!-- Main FAB - Small like Flutter -->
                <Button x:Name="FabButton"
                        Click="FabButton_Click"
                        Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="FabBorder" Background="#E3F2FD" CornerRadius="20" Width="40" Height="40">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                                </Border.Effect>
                                <TextBlock x:Name="FabIcon" Text="â˜°" Foreground="#1976D2" FontSize="18"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Popup>
    </Grid>
</Window>
